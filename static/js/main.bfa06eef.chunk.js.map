{"version":3,"sources":["images/icon.png","images/gorgeous-line-top.png","images/gorgeous-line-bottom.png","images/certificate-stamp.png","images/facebook-icon.svg","images/twitter-icon.svg","images/mail-icon.svg","utils/hex.js","components/Home.js","utils/getWeb3.js","utils/getContractInstance.js","utils/common.js","components/Certificate.js","utils/sendTransaction.js","components/IssuePage.js","components/App.js","index.js"],"names":["module","exports","toHex","str","s","unescape","encodeURIComponent","h","i","length","charCodeAt","toString","fromHex","String","fromCharCode","parseInt","substr","decodeURIComponent","escape","Home","state","bride","groom","handleChange","e","setState","target","name","value","validation","this","canIssue","className","src","IconImg","alt","width","height","type","placeholder","required","onChange","to","Component","getWeb3","Promise","resolve","reject","a","window","ethereum","web3","Web3","enable","console","log","Error","getContractInstance","contractDefinition","eth","net","getId","networkId","deployedAddress","networks","address","instance","Contract","abi","TWEET_TXT","buildFBLink","href","location","redirectUri","buildTWLink","url","buildMLink","subject","body","Certificate","cerID","txHash","issuedDate","Date","toLocaleDateString","componentDidMount","params","props","match","isSample","getAccounts","accounts","contract","id","decodeCertificateID","methods","certificates","call","from","certificate","getTransactionReceipt","receipt","getBlock","blockNumber","block","replace","timestamp","alert","message","error","path","LineTopImg","face","CerImg","LineBottomImg","rel","FacebookImg","TwitterImg","MailImg","hex","Number","sendTransaction","transaction","estimateGas","gas","options","data","encodeABI","gasPrice","send","blockHash","IssuePage","issuing","issued","handleClick","padTo32byte","FEE","fee","issueCertificate","events","Issued","returnValues","certificateID","transactionHash","process","readOnly","disabled","role","aria-hidden","onClick","padStart","App","basename","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bfa06eef.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/icon.57c400b8.png\";","module.exports = __webpack_public_path__ + \"static/media/gorgeous-line-top.ff1db429.png\";","module.exports = __webpack_public_path__ + \"static/media/gorgeous-line-bottom.d1162595.png\";","module.exports = __webpack_public_path__ + \"static/media/certificate-stamp.dd99316c.png\";","module.exports = __webpack_public_path__ + \"static/media/facebook-icon.1102b5b1.svg\";","module.exports = __webpack_public_path__ + \"static/media/twitter-icon.a1223de5.svg\";","module.exports = __webpack_public_path__ + \"static/media/mail-icon.46bb5905.svg\";","// Ref: https://gist.github.com/valentinkostadinov/5875467\nconst toHex = (str) => {\n    // utf8 to latin1\n    var s = unescape(encodeURIComponent(str))\n    var h = ''\n    for (var i = 0; i < s.length; i++) {\n        h += s.charCodeAt(i).toString(16)\n    }\n    return h\n}\n\nconst fromHex = (h) => {\n    var s = ''\n    for (var i = 0; i < h.length; i+=2) {\n        s += String.fromCharCode(parseInt(h.substr(i, 2), 16))\n    }\n\n    return decodeURIComponent(escape(s))\n}\n\nexport { toHex, fromHex }\n","import React, { Component } from \"react\"\n\nimport { Link } from \"react-router-dom\"\nimport { toHex } from \"../utils/hex\"\n\nimport IconImg from \"../images/icon.png\"\n\nclass Home extends Component {\n  state = {\n    bride: '',\n    groom: '',\n  }\n\n  handleChange = (e) => this.setState({[e.target.name]: toHex(e.target.value)})\n\n  validation = (value) => 1 <= value.length && value.length <= 64\n\n  render() {\n    let bride = this.state.bride\n    let groom = this.state.groom\n    let canIssue = this.validation(bride) && this.validation(groom)\n\n    return (\n      <div className=\"container ribbon14-wrapper\">\n        <span className=\"ribbon14\">â™¡</span>\n        <div className=\"py-5 text-center\">\n          <img className=\"d-block mx-auto mb-4\" src={IconImg} alt=\"\" width=\"72\" height=\"72\"/>\n          <h1 className=\"text-white\">Marriage certificate on Blockchain</h1>\n          <p className=\"lead text-white\">Blockchain prove your marriage forever even you go. Issue marriage certificate for everybody even sexual minorities.</p>\n        </div>\n        <form className=\"form-signin\">\n          <div className=\"text-center mb-4\">\n            <p className=\"lead text-white\">Please tell us <code className=\"p-1 bg-light\">your name</code> and <br/><code className=\"p-1 bg-light\">your partner's name</code>. We are going to show you a sample certificate.</p>\n          </div>\n\n          <div className=\"form-label-group mb-2\">\n            <input type=\"text\" name=\"bride\" placeholder=\"Your Name\" required\n              onChange={(e) => this.handleChange(e)}\n              className={this.validation(bride) || bride === '' ? \"form-control\" : \"is-invalid form-control\"}/>\n            <div className=\"invalid-feedback text-white\">Too Long</div>\n          </div>\n\n          <div className=\"form-label-group mb-4\">\n            <input type=\"text\" name=\"groom\" placeholder=\"Partner's Name\" required\n              onChange={(e) => this.handleChange(e)}\n              className={this.validation(groom) || groom === '' ? \"form-control\" : \"is-invalid form-control\"}/>\n            <div className=\"invalid-feedback text-white\">Too Long</div>\n          </div>\n          <Link className={canIssue\n              ? 'btn btn-lg btn-block btn-outline-pink'\n              : 'btn btn-lg btn-block btn-outline-pink disabled'\n            } to={`/certificate/sample/${bride}/${groom}`}>Issue Sample Certification</Link>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default Home;\n","import Web3 from \"web3\";\n\nconst getWeb3 = () =>\n  new Promise(async (resolve, reject) => {\n    // Wait for loading completion to avoid race conditions with web3 injection timing.\n    // window.addEventListener(\"load\", async () => {\n      // Modern dapp browsers...\n      if (window.ethereum) {\n        const web3 = new Web3(window.ethereum);\n\n        try {\n          // Request account access if needed\n          await window.ethereum.enable();\n          // Acccounts now exposed\n          resolve(web3);\n        } catch (error) {\n          reject(error);\n        }\n      }\n      // Legacy dapp browsers...\n      else if (window.web3) {\n        // Use Mist/MetaMask's provider.\n        const web3 = window.web3;\n        console.log(\"Injected web3 detected.\");\n        resolve(web3);\n      }\n      // Fallback to localhost; use dev console port by default...\n      else {\n        reject(new Error('Please install metamask'));\n        // const provider = new Web3.providers.HttpProvider(\n        //   \"http://127.0.0.1:8545\"\n        // );\n        // const web3 = new Web3(provider);\n        // console.log(\"No web3 instance injected, using Local web3.\");\n        // resolve(web3);\n      }\n    // });\n  });\n\nexport default getWeb3;\n","const getContractInstance = async (web3, contractDefinition) => {\n\n  // get network ID and the deployed address\n  const networkId = await web3.eth.net.getId()\n  const deployedAddress = contractDefinition.networks[networkId].address\n\n  // create the instance\n  const instance = new web3.eth.Contract(contractDefinition.abi, deployedAddress)\n\n  return instance\n}\n\nexport default getContractInstance\n","const APP_ID = 2593999254169138\nconst TWEET_TXT = 'I issued a marriage certificate on Blockchain. Check out my certificate'\nconst ML_SUBJECT = 'I issued a marriage certificate on Blockchain'\n\nconst buildFBLink = () => {\n  const appID = APP_ID\n  const display = 'popup'\n  const href = encodeURIComponent(window.location.href)\n  const redirectUri = encodeURIComponent(window.location.href)\n  return `https://www.facebook.com/dialog/share?app_id=${appID}&display=${display}&href=${href}&redirect_uri=${redirectUri}`\n}\n\nconst buildTWLink = () => {\n  const text = TWEET_TXT\n  const hashtags = 'blockchain,marriage,certificate'\n  const url = encodeURIComponent(window.location.href)\n  return `https://twitter.com/intent/tweet?text=${text}&hashtags=${hashtags}&url=${url}`\n}\n\nconst buildMLink = () => {\n  const subject = encodeURIComponent(ML_SUBJECT)\n  const body = encodeURIComponent(`${TWEET_TXT}: ${window.location.href}`)\n  return `mailto:?Subject=${subject}&body=${body}`\n}\n\nconst redirectRoot = (condition) => {\n  if (condition) window.location.href = \"/\"\n}\n\nexport { redirectRoot, buildFBLink, buildTWLink, buildMLink }\n","import React, { Component } from \"react\"\nimport { Link } from \"react-router-dom\"\n\nimport contractDefinition from \"../contracts/MarriageCertificateIssuer.json\"\nimport getWeb3 from \"../utils/getWeb3\"\nimport getContractInstance from '../utils/getContractInstance'\nimport { buildFBLink, buildTWLink, buildMLink } from \"../utils/common\"\nimport { toHex, fromHex } from \"../utils/hex\"\n\nimport LineTopImg from \"../images/gorgeous-line-top.png\"\nimport LineBottomImg from \"../images/gorgeous-line-bottom.png\"\nimport CerImg from \"../images/certificate-stamp.png\"\nimport FacebookImg from \"../images/facebook-icon.svg\"\nimport TwitterImg from \"../images/twitter-icon.svg\"\nimport MailImg from \"../images/mail-icon.svg\"\n\nconst PREFIX_NUM = 20000000\n\nclass Certificate extends Component {\n  state = {\n    bride: '',\n    groom: '',\n    cerID: '0x00000',\n    txHash: '0x0000000000000000000000000000000000000000',\n    issuedDate: (new Date()).toLocaleDateString('en-US'),\n  }\n\n  componentDidMount = async () => {\n    const params = this.props.match.params\n    console.log(params)\n\n    // Sample Page\n    if (this.isSample()) {\n      this.setState({ bride: fromHex(params.bride), groom: fromHex(params.groom) })\n      return\n    }\n\n    // Real Page\n    try {\n      const web3 = await getWeb3()\n      const accounts = await web3.eth.getAccounts()\n      const contract = await getContractInstance(web3, contractDefinition)\n\n      const id = decodeCertificateID(params.id)\n      const certificate = await contract.methods.certificates(id).call({ from: accounts[0] })\n      const receipt = await web3.eth.getTransactionReceipt(params.txHash)\n      const block = await web3.eth.getBlock(receipt.blockNumber)\n\n      this.setState({\n        bride: fromHex(certificate.bride.replace(/^0x0*/,'')),\n        groom: fromHex(certificate.groom.replace(/^0x0*/,'')),\n        cerID: params.id,\n        txHash: params.txHash,\n        issuedDate: (new Date(block.timestamp * 1000)).toLocaleDateString('en-US'),\n      })\n\n    } catch (e) {\n      alert(e.message, console.error(e))\n    }\n  }\n\n  isSample = () => this.props.match.path === '/certificate/sample/:bride/:groom/'\n\n  render() {\n    const isSample = this.isSample()\n    return (\n      <div className=\"bg-white\">\n        <div className=\"container py-5\">\n          <div className=\"cross-line text-center my-2 mx-2\">\n            <div className=\"row mt-3\">\n              <div className=\"col\">\n                <img className=\"d-block mx-auto mb-4\" src={LineTopImg} alt=\"\" width=\"300\" height=\"50\"/>\n                { isSample ? <h3>Sample</h3> : ''}\n                <h1 className=\"text-pink\"><font face=\"cursive\">Certificate of Marriage</font></h1>\n                <h3 className=\"text-pink\">Recorded forever in Blockchain</h3>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col-md-5\">\n                <p className=\"lead mx-4 border-line\"><font face=\"cursive\">{this.state.bride}</font></p>\n              </div>\n              <div className=\"col-md-2\">\n                <p>And</p>\n              </div>\n              <div className=\"col-md-5\">\n                <p className=\"lead mx-4 border-line\"><font face=\"cursive\">{this.state.groom}</font></p>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col\">\n                <p>Were United in Marriage on <code className=\"border-line text-dark\"><font face=\"cursive\">{this.state.issuedDate}</font></code><br/>This Certificate was Recored in a Smart Contract of Ethereum.</p>\n              </div>\n            </div>\n            <div className=\"row mb-5\">\n              <div className=\"col-md-1\"></div>\n              <div className=\"col-md-8 text-left\">\n                <blockquote className=\"blockquote ml-2\">\n                  <p className=\"mb-0\">Transaction Hash:</p>\n                  <footer className=\"blockquote-footer break-word\">{this.state.txHash}</footer>\n                </blockquote>\n                <blockquote className=\"blockquote ml-2\">\n                  <p className=\"mb-0\">Certificate ID:</p>\n                  <footer className=\"blockquote-footer break-word\">{this.state.cerID}</footer>\n                </blockquote>\n              </div>\n              <div className=\"col-md-2\">\n                <img src={CerImg} alt=\"certificates stamp\" width=\"130\" height=\"150\"/>\n              </div>\n              <div className=\"col-md-1\"></div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col\">\n                <img className=\"d-block mx-auto mb-4\" src={LineBottomImg} alt=\"\" width=\"270\" height=\"40\"/>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"pink lighten-1\">\n          <div className=\"container\">\n            <div className=\"row text-white\">\n              <div className=\"col\">\n                <p className=\"lead my-1\">Share with your partner</p>\n                <nav className=\"mb-2\">\n                  <ul className=\"nav\">\n                    <li className=\"nav-item\">\n                      <a href={buildFBLink()} target=\"_blank\" rel=\"noopener noreferrer\" className=\"nav-link sns\"><img src={FacebookImg} alt=\"\" width=\"40\" height=\"40\"/></a>\n                    </li>\n                    <li className=\"nav-item\">\n                      <a href={buildTWLink()} target=\"_blank\" rel=\"noopener noreferrer\" className=\"nav-link sns\"><img src={TwitterImg} alt=\"\" width=\"40\" height=\"40\"/></a>\n                    </li>\n                    <li className=\"nav-item\">\n                      <a href={buildMLink()} target=\"_blank\" rel=\"noopener noreferrer\" className=\"nav-link sns\"><img src={MailImg} alt=\"\" width=\"40\" height=\"40\"/></a>\n                    </li>\n                  </ul>\n                </nav>\n              </div>\n            </div>\n            { isSample\n              ? <div className=\"row mb-2\">\n                  <div className=\"col\">\n                    <Link className=\"btn btn-lg btn-block btn-outline-pink\"\n                      to={`/issue/${toHex(this.state.bride)}/${toHex(this.state.groom)}`}>Next</Link>\n                  </div>\n                </div>\n              : ''\n             }\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst decodeCertificateID = (hex) => Number(fromHex(hex.replace(/^0x/, \"\"))) - PREFIX_NUM - 1\n\nexport default Certificate\n","const sendTransaction = async (transaction, from, value=0, web3) => {\n  const gas = await transaction.estimateGas({ from, value })\n\n  console.log(\"Estimaged Gas:\" + gas)\n  console.log(transaction)\n\n  let options = {\n    from,\n    data: transaction.encodeABI(),\n    gas: gas + 10000,\n    gasPrice: 10000000000,\n    value\n  }\n\n  const receipt = await transaction.send(options)\n\n  console.log(receipt)\n\n  if (!receipt.blockHash) throw new Error('Failed to send transaction')\n\n  return receipt;\n}\n\nexport default sendTransaction\n","import React, { Component } from \"react\"\n\nimport contractDefinition from \"../contracts/MarriageCertificateIssuer.json\"\nimport getWeb3 from \"../utils/getWeb3\"\nimport getContractInstance from '../utils/getContractInstance'\nimport sendTransaction from '../utils/sendTransaction'\nimport { toHex, fromHex } from \"../utils/hex\"\n\nclass IssuePage extends Component {\n  state = {\n    issuing: false,\n    issued: false,\n    bride: '',\n    groom: '',\n    cerID: '',\n    txHash: '',\n  }\n\n  componentDidMount() {\n    const params = this.props.match.params\n    this.setState({bride: params.bride, groom: params.groom})\n  }\n\n  handleChange = (e) => this.setState({[e.target.name]: toHex(e.target.value)})\n\n  handleClick = async () => {\n    if (this.state.issued) {\n      const s = this.state\n      window.location.href = `/certificate/${s.cerID}/${s.txHash}`\n    }\n\n    try {\n      this.setState({issuing: true})\n      const web3 = await getWeb3()\n      const accounts = await web3.eth.getAccounts()\n      const contract = await getContractInstance(web3, contractDefinition)\n\n      const bride = padTo32byte(this.state.bride)\n      const groom = padTo32byte(this.state.groom)\n      const fee = await contract.methods.FEE().call({ from: accounts[0] })\n\n      const transaction = contract.methods.issueCertificate(bride, groom)\n      const receipt = await sendTransaction(transaction, accounts[0], fee)\n\n      this.setState({\n        issued: true,\n        issuing: false,\n        cerID: `0x${toHex(receipt.events.Issued.returnValues.certificateID)}`,\n        txHash: receipt.transactionHash\n      },() => {\n        window.location.href = process.env.PUBLIC_URL === ''\n          ? `/certificate/${this.state.cerID}/${this.state.txHash}`\n          : `/${process.env.PUBLIC_URL}/certificate/${this.state.cerID}/${this.state.txHash}`\n      })\n\n    } catch (e) {\n      this.setState({issuing: false})\n      alert(e.message, console.error(e))\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"py-4 text-center\">\n          <h1 className=\"text-white\">Issue Real Marriage Certificate</h1>\n        </div>\n        <form className=\"form-signin\">\n          <div className=\"text-left mb-4\">\n            <p className=\"lead text-white\">Confirm your and your partner's name.</p>\n          </div>\n          <div className=\"form-label-group mb-2\">\n            { this.state.issued || this.state.issuing\n              ? <input type=\"text\" className=\"form-control\" value={fromHex(this.state.bride)} readOnly/>\n              : <input type=\"text\" name=\"bride\" className=\"form-control\"\n                  value={fromHex(this.state.bride)} onChange={(e) => this.handleChange(e)} />\n            }\n          </div>\n          <div className=\"form-label-group mb-4\">\n            { this.state.issued || this.state.issuing\n              ? <input type=\"text\" className=\"form-control\" value={fromHex(this.state.groom)} readOnly/>\n              : <input type=\"text\" name=\"groom\" className=\"form-control\"\n                  value={fromHex(this.state.groom)} onChange={(e) => this.handleChange(e)} />\n            }\n          </div>\n          <div className=\"text-left mb-4\">\n            <p className=\"lead text-white\">We issue marriage certificate on Ethereum and take <u>0.02</u> ETH as issuance fee. Please make sure that <a className=\"text-white\"href=\"https://metamask.io/\"><strong>MetaMask</strong></a> have installed and enough ETH have been deposited.</p>\n            <p className=\"lead text-white\">If you have prepared, we issue marriage certificate for you. It may take few minutes. Be patient.</p>\n          </div>\n          { this.state.issuing\n            ? <button className = \"btn btn-lg btn-block btn-outline-pink mb-4\" disabled>\n                <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span> Issuing...\n              </button>\n            : <button className = \"btn btn-lg btn-block btn-outline-pink mb-4\" onClick = {(e) => this.handleClick(e)}>\n                { this.state.issued  ? 'View Certificate' : 'Issue Real Certificate'}\n              </button>\n          }\n\n        </form>\n      </div>\n    )\n  }\n}\n\nconst padTo32byte = (hex) => `0x${hex.padStart(64, '0')}`\n\nexport default IssuePage\n","import React, { Component } from \"react\"\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\n\nimport Home from './Home'\nimport Certificate from './Certificate'\nimport IssuePage from './IssuePage'\n\nclass App extends Component {\n  render() {\n    return (\n      <Router basename={process.env.PUBLIC_URL}>\n        <Switch>\n          <Route path=\"/certificate/sample/:bride/:groom/\" component={Certificate}/>\n          <Route path=\"/certificate/:id/:txHash\" component={Certificate}/>\n          <Route path=\"/issue/:bride/:groom/\" component={IssuePage}/>\n          <Route path=\"/\" component={Home}/>\n        </Switch>\n      </Router>\n    )\n  }\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}